<?xml version="1.0" encoding="UTF-8"?>
<sqlMap>
	<sqls>
		<entry>
			<key>01</key>
			<description>将船舶任务子表数据同步到临时表</description>
			<value>
			<![CDATA[
 			 INSERT INTO tab_temp_b (id, Time, Cmsid, PushTime, OneTask, direction, unloaderMove, operationType, offset, groupId)
 			 SELECT id, Time, Cmsid, PushTime, OneTask, direction, unloaderMove, operationType, offset, ? from %s
			]]>
			</value>
		</entry>
		<entry>
			<key>02</key>
			<description>【任务子表】删除任务子表：卸船作业信息</description>
			<value>
			<![CDATA[
 			DELETE FROM %s
			]]>
			</value>
		</entry>
		<entry>
			<key>03</key>
			<description>【任务子表】删除任务子表：组信息</description>
			<value>
			<![CDATA[
			DELETE FROM %s
			]]>
			</value>
		</entry>
		<entry>
			<key>04</key>
			<description>重新同步任务子表数据</description>
			<value>
			<![CDATA[
				SELECT *
				FROM tab_unloader_all b
				WHERE (b.operationType = 0
						OR b.operationType = 1)
					AND b.Time >= (
						SELECT t.begin_time
						FROM tab_task t
						WHERE t.id = ?
					)
					AND b.Time <= (
						SELECT CASE 
								WHEN t.end_time IS NULL THEN CURRENT_TIMESTAMP()
								ELSE t.end_time
							END
						FROM tab_task t
						WHERE t.id = ?
					)
				ORDER BY b.Time ASC
			]]>
			</value>
		</entry>
	</sqls>
</sqlMap>